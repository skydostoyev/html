<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  　　<meta name="viewport" content="width=device-width" >
  <title>AWS-MQTT</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <script src="jquery-3.6.1.min.js"></script>
 <!-- <script src="https://bundle.run/buffer"></script>-->
  <link rel="stylesheet" href="bulma.css">
 <style>
   body{
      width: 100%;
      max-width: 304px;
      margin: auto;
   }
  
</style>
</head>
<body>
   <div >
      <div class="navbar-brand">
           <h1 class="is-size-1">Solar Energy</h1 >           
      </div>

      <div class="navbar-brand">
           <h6 id="h_user" class="is-size-5"></h6 >            
      </div>

      <div>
         <label for="email">Enter your email:</label>
         <input type="email" id="email" pattern=".+@.+" size="30" required>

       <button id="btnOnOff" class="button is-primary is-size-5" type="button" onclick="login()">Login</button>  
       <button id="btnOnOff" class="button is-primary is-size-5" type="button" onclick="fetchS3()">S3</button>            
      </div>
      <div id="div_debug"></div>     
   </div>
   
   <script language="javascript" type="text/javascript">
      
      function fetchS3(){
         const myInit = {
            method: 'GET',
            mode: 'cors',
            credentials: 'include',
           
         };

         const re=fetch('https://d2s6bti7djlk56.cloudfront.net/text.json',myInit)
    .then((response) => {
       return response.json();
    })
    .then((data) => {
      //console.log(data.body);
      
      document.getElementById("div_debug").innerHTML=JSON.stringify(data);
    });

 
      }
      function login() {
        
         var email = document.getElementById('email').value;
         JSON.stringify({email:email}) ;
         var xmlhttp = new XMLHttpRequest();
         const myHeaders = new Headers();
         myHeaders.append('Accept', 'application/json');
         myHeaders.append("Content-Type","application/json"); 
         
         const myInit = {
            method: 'POST',
            headers: myHeaders,
            mode: 'cors',
            credentials: 'include',
            body:JSON.stringify({country:"Japan"})
         };
         

    const re=fetch('https://iot.pocurl.link/prod/auth',myInit)
    .then((response) => {
       return response.json();
    })
    .then((data) => {
      //console.log(data.body);
      
      document.getElementById("div_debug").innerHTML=JSON.stringify(data);
    });


      }
      </script>
</body>
</html>


